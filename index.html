<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock</title>
    <style>
        /* From Uiverse.io by uiverse-astronaut */
        .container {
            width: 100%;
            height: 100%;
            --color: #a748f5;
            background: linear-gradient(95deg, var(--color) 25%, transparent 25%) -50px 0,
                        linear-gradient(-15deg, var(--color) 25%, transparent 25%) -50px 0,
                        linear-gradient(25deg, transparent 75%, var(--color) 75%) -50px 0,
                        linear-gradient(-45deg, transparent 75%, var(--color) 75%) -50px 0,
                        linear-gradient(-15deg, transparent 75%, var(--color) 75%) -50px 0;
            background-color: #b669fd;
            background-size: 40px 40px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Keep the background behind the clock */
        }
        /* Styling for the clock display */
        #clock {
            font-size: 48px;
            text-align: center;
            color: white;
            z-index: 1;
            position: absolute;
            top: 50%;
            left: 30%;
            transform: translate(-50%, -50%);
        }
        /* Input box and button */
        .input-container {
            text-align: center;
            position: absolute;
            top: 70%;
            left: 30%;
            transform: translateX(-50%);
            color: white;
        }
        #titleInput {
            font-size: 20px;
            padding: 5px;
            margin-right: 10px;
        }
        #applyButton {
            font-size: 20px;
            padding: 5px 10px;
            cursor: pointer;
        }
        /* Flappy Nerd Game */
        .game-container {
            position: absolute;
            top: 50%;
            left: 65%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        canvas {
            background-color: #222;
            border: 2px solid white;
        }
    </style>
    <script>
        let customTitle = "";  

        function updateTime() {
            let currentTime = new Date().toLocaleTimeString();
            document.getElementById("clock").innerText = currentTime;
            if (customTitle.includes("%time%")) {
                document.title = customTitle.replace("%time%", currentTime);
            }
        }

        function applyCustomTitle() {
            let userInput = document.getElementById("titleInput").value;
            customTitle = userInput;  
            if (userInput === "") {
                customTitle = ""; 
            }
            updateTime();
        }

        window.onload = function() {
            let currentTime = new Date().toLocaleTimeString();
            document.title = currentTime;
            setInterval(updateTime, 1000);  
        };

        // Flappy Nerd Game
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        document.querySelector(".game-container").appendChild(canvas);

        canvas.width = 300;
        canvas.height = 400;

        let nerd = { x: 50, y: 200, width: 30, height: 30, velocity: 0, gravity: 0.5 };
        let pipes = [];
        let score = 0;
        let gameOver = false;

        function drawNerd() {
            ctx.font = "30px Arial";
            ctx.fillText("ðŸ¤“", nerd.x, nerd.y);
        }

        function drawPipes() {
            ctx.fillStyle = "green";
            pipes.forEach(pipe => {
                ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
                ctx.fillRect(pipe.x, pipe.bottom, pipe.width, canvas.height - pipe.bottom);
            });
        }

        function updatePipes() {
            if (pipes.length === 0 || pipes[pipes.length - 1].x < 200) {
                let height = Math.random() * (canvas.height / 2) + 50;
                pipes.push({ x: canvas.width, width: 40, top: height, bottom: height + 100 });
            }
            pipes.forEach(pipe => pipe.x -= 2);
            if (pipes.length && pipes[0].x < -40) {
                pipes.shift();
                score++;
            }
        }

        function checkCollision() {
            if (nerd.y >= canvas.height || nerd.y <= 0) {
                gameOver = true;
            }
            pipes.forEach(pipe => {
                if (
                    nerd.x < pipe.x + pipe.width &&
                    nerd.x + nerd.width > pipe.x &&
                    (nerd.y < pipe.top || nerd.y + nerd.height > pipe.bottom)
                ) {
                    gameOver = true;
                }
            });
        }

        function gameLoop() {
            if (gameOver) {
                ctx.fillStyle = "red";
                ctx.font = "20px Arial";
                ctx.fillText("Game Over! Refresh to restart", 30, 200);
                return;
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawNerd();
            drawPipes();
            updatePipes();
            nerd.velocity += nerd.gravity;
            nerd.y += nerd.velocity;
            checkCollision();
            requestAnimationFrame(gameLoop);
        }

        function jump() {
            nerd.velocity = -7;
        }

        document.addEventListener("keydown", (e) => {
            if (e.code === "Space") jump();
        });

        document.addEventListener("click", jump);

        function startGame() {
            nerd.y = 200;
            nerd.velocity = 0;
            pipes = [];
            score = 0;
            gameOver = false;
            gameLoop();
        }
    </script>
</head>
<body>
    <div id="clock"></div>
    <div class="container"></div>

    <!-- Input box and button for custom title -->
    <div class="input-container">
        <input type="text" id="titleInput" placeholder="Enter title format (e.g., %time% - 10:15:00)" />
        <button id="applyButton" onclick="applyCustomTitle()">Apply</button>
    </div>

    <!-- Flappy Nerd Game -->
    <div class="game-container">
        <button onclick="startGame()">Start Flappy Nerd ðŸ¤“</button>
    </div>
</body>
</html>
